<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentación CRM-UM - Sistema de Gestión Universitaria</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #f5f5f5;
            color: #1a1a1a;
            line-height: 1.6;
            font-size: 12px;
        }

        p {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            page-break-inside: avoid;
        }

        .header {
            text-align: center;
            background: #ffffff;
            padding: 40px 20px;
            margin-bottom: 30px;
            border: 4px solid #000;
            box-shadow: 8px 8px 0 #000;
            transition: all 0.2s ease;
        }

        .header:hover {
            box-shadow: 6px 6px 0 #000;
            transform: translate(2px, 2px);
        }

        .header h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3rem;
            color: #1a1a1a;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
            font-family: Arial, sans-serif;
        }

        .section {
            background: #ffffff;
            margin-bottom: 30px;
            padding: 30px;
            border: 4px solid #000;
            box-shadow: 8px 8px 0 #000;
            transition: all 0.2s ease;
            page-break-inside: avoid;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            box-sizing: border-box;
        }

        .section:hover {
            box-shadow: 6px 6px 0 #000;
            transform: translate(2px, 2px);
        }

        .section h2 {
            font-family: 'Bebas Neue', sans-serif;
            color: #1a1a1a;
            font-size: 2rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #000;
            padding-bottom: 10px;
            letter-spacing: 2px;
        }

        .section h3 {
            font-family: 'Bebas Neue', sans-serif;
            color: #1a1a1a;
            font-size: 1.5rem;
            margin: 20px 0 10px 0;
            letter-spacing: 1px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: #f8f9fa;
            padding: 20px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            transition: all 0.2s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            box-shadow: 2px 2px 0 #000;
            transform: translate(2px, 2px);
        }

        .card h4 {
            font-family: 'Bebas Neue', sans-serif;
            color: #1a1a1a;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 3px solid #000;
        }

        .table th, .table td {
            border: 2px solid #000;
            padding: 12px;
            text-align: left;
            font-family: Arial, sans-serif;
            font-size: 12px;
        }

        .table th {
            background: #1a1a1a;
            color: white;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
        }

        .table tr:nth-child(even) {
            background: #f2f2f2;
        }

        .canvas-container {
            text-align: center;
            margin: 20px 0;
        }

        canvas {
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            background: white;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            width: 3px;
            height: 100%;
            background: #000;
        }

        .timeline-item {
            position: relative;
            margin: 20px 0;
            width: 45%;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
        }

        .timeline-item:nth-child(even) {
            left: 55%;
        }

        .timeline-content {
            background: #f8f9fa;
            padding: 15px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border: 2px solid #000;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: #1a1a1a;
            transition: width 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: #1a1a1a;
            color: white;
            padding: 20px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            text-align: center;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            box-shadow: 2px 2px 0 #000;
            transform: translate(2px, 2px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 2px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            font-family: Arial, sans-serif;
        }

        .btn {
            background: #1a1a1a;
            color: white;
            padding: 10px 20px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
            transition: all 0.2s ease;
        }

        .btn:hover {
            box-shadow: 2px 2px 0 #000;
            transform: translate(2px, 2px);
        }

        .highlight {
            background: #1a1a1a;
            color: white;
            padding: 20px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            margin: 20px 0;
            transition: all 0.2s ease;
        }

        .highlight:hover {
            box-shadow: 2px 2px 0 #000;
            transform: translate(2px, 2px);
        }

        .references {
            background: #f8f9fa;
            padding: 20px;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            margin: 20px 0;
        }

        .references h3 {
            font-family: 'Bebas Neue', sans-serif;
            color: #1a1a1a;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .references ol {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.6;
        }

        .references li {
            margin-bottom: 10px;
        }

        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            body {
                background: white !important;
                font-size: 11px !important;
                margin: 0 !important;
                padding: 0 !important;
                line-height: 1.4 !important;
            }
            
            .container {
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .section {
                background: white !important;
                box-shadow: none !important;
                border: 2px solid #000 !important;
                margin: 0 !important;
                padding: 20px !important;
                min-height: auto !important;
                page-break-before: always !important;
                page-break-after: always !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin-bottom: 20px !important;
            }
            
            /* Prevent orphaned titles */
            .section:first-child {
                page-break-before: auto !important;
            }
            
            .section h2 {
                page-break-after: avoid !important;
                break-after: avoid !important;
                margin-bottom: 15px !important;
            }
            
            .section h2 + * {
                page-break-before: avoid !important;
                break-before: avoid !important;
            }
            
            .header {
                background: white !important;
                box-shadow: none !important;
                border: 2px solid #000 !important;
                margin: 0 !important;
                padding: 20px !important;
                page-break-after: always !important;
                page-break-inside: avoid !important;
            }
            
            .card {
                box-shadow: none !important;
                border: 1px solid #000 !important;
                margin: 10px 0 !important;
                padding: 15px !important;
                page-break-inside: avoid !important;
            }
            
            .highlight {
                box-shadow: none !important;
                border: 1px solid #000 !important;
                margin: 10px 0 !important;
                padding: 15px !important;
                page-break-inside: avoid !important;
            }
            
            .grid {
                display: block !important;
                margin: 10px 0 !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .section h2 + .grid {
                page-break-before: avoid !important;
                break-before: avoid !important;
                margin-top: 10px !important;
            }
            
            .grid .card {
                margin: 10px 0 !important;
                page-break-inside: avoid !important;
            }
            
            canvas {
                max-width: 100% !important;
                height: auto !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .canvas-container {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin: 20px 0 !important;
                text-align: center !important;
            }
            
            .canvas-container canvas {
                display: block !important;
                margin: 0 auto !important;
                max-width: 90% !important;
                height: auto !important;
            }
            
            h1, h2, h3, h4 {
                page-break-after: avoid !important;
                break-after: avoid !important;
            }
            
            /* Ensure section titles stay with their content */
            .section > h2 {
                page-break-after: avoid !important;
                break-after: avoid !important;
            }
            
            .section > h2 + div,
            .section > h2 + .grid,
            .section > h2 + .highlight {
                page-break-before: avoid !important;
                break-before: avoid !important;
            }
            
            /* Ensure any first element after section title stays with it */
            .section > h2 + * {
                page-break-before: avoid !important;
                break-before: avoid !important;
            }
            
            p, ul, ol {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            table {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .timeline {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .timeline-item {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .references {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .references ol {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .references li {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            ul, ol {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin: 10px 0 !important;
            }
            
            li {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin: 5px 0 !important;
            }
            
            .stats-grid {
                display: block !important;
                margin: 10px 0 !important;
            }
            
            .stat-card {
                margin: 10px 0 !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                padding: 10px;
            }
            .section {
                padding: 20px;
                min-height: auto;
            }
            .header h1 {
                font-size: 2rem;
            }
            canvas {
                max-width: 100%;
                height: auto;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            .header h1 {
                font-size: 2rem;
            }
            .grid {
                grid-template-columns: 1fr;
            }
            .timeline::before {
                left: 20px;
            }
            .timeline-item {
                width: 100%;
                left: 0 !important;
                padding-left: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 1. Documento de Inicio del Proyecto -->
        <div class="section">
            <div class="header">
                <h1>CRM-UM</h1>
                <p>Sistema de Gestión Universitaria - Universidad Milenium</p>
            </div>
            
            <h2>1. Documento de Inicio del Proyecto</h2>
            
            <div class="grid">
                <div class="card">
                    <h4>📋 Título del Proyecto</h4>
                    <p><strong>CRM-UM:</strong> Sistema de Gestión de Relaciones con Estudiantes y Administración Universitaria</p>
                </div>
                
                <div class="card">
                    <h4>🎯 Objetivo General</h4>
                    <p>Desarrollar una plataforma integral para la gestión de estudiantes, administración de carreras, control de documentos y seguimiento de procesos académicos de la Universidad Milenium.</p>
                </div>
            </div>

            <div class="grid">
                <div class="card">
                    <h4>💡 Justificación del Proyecto</h4>
                    <p>La Universidad Milenium requiere un sistema moderno y eficiente para gestionar sus procesos académicos, mejorar la experiencia del estudiante y optimizar la administración interna.</p>
                </div>
                
                <div class="card">
                    <h4>🔍 Necesidad que Atiende</h4>
                    <p>Problema actual: Gestión manual de estudiantes, documentos dispersos, falta de seguimiento de procesos y comunicación ineficiente entre áreas.</p>
                </div>
            </div>

            <div class="grid">
                <div class="card">
                    <h4>🚀 Solución Propuesta</h4>
                    <p>Aplicación web/móvil con React Native y Expo, integrada con Supabase para gestión de datos en tiempo real, con módulos especializados para cada área.</p>
                </div>
                
                <div class="card">
                    <h4>📈 Etapas del Ciclo de Vida</h4>
                    <ul>
                        <li><strong>Inicio:</strong> Análisis de requerimientos y planificación</li>
                        <li><strong>Planeación:</strong> Diseño de arquitectura y prototipado</li>
                        <li><strong>Ejecución:</strong> Desarrollo e implementación</li>
                        <li><strong>Cierre:</strong> Pruebas, despliegue y documentación</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 2. Mapa Conceptual -->
        <div class="section">
            <h2>2. Mapa Conceptual de la Administración de Proyectos</h2>
            <div class="canvas-container">
                <canvas id="conceptMap" width="800" height="400"></canvas>
            </div>
        </div>

        <!-- 3. Comparativa de Metodologías -->
        <div class="section">
            <h2>3. Comparativa de Metodologías</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th>PMI</th>
                        <th>RUP</th>
                        <th>BPM</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Enfoque</strong></td>
                        <td>Gestión de proyectos tradicional</td>
                        <td>Desarrollo iterativo e incremental</td>
                        <td>Optimización de procesos de negocio</td>
                    </tr>
                    <tr>
                        <td><strong>Fases Principales</strong></td>
                        <td>Inicio, Planificación, Ejecución, Control, Cierre</td>
                        <td>Inicio, Elaboración, Construcción, Transición</td>
                        <td>Análisis, Diseño, Implementación, Monitoreo</td>
                    </tr>
                    <tr>
                        <td><strong>Ventajas</strong></td>
                        <td>Estandarizado, ampliamente reconocido</td>
                        <td>Flexible, orientado a calidad</td>
                        <td>Enfoque en procesos de negocio</td>
                    </tr>
                    <tr>
                        <td><strong>Desventajas</strong></td>
                        <td>Puede ser rígido para proyectos ágiles</td>
                        <td>Complejo para proyectos pequeños</td>
                        <td>Requiere cambio organizacional</td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight">
                <h3>🎯 Elección del Equipo</h3>
                <p><strong>Metodología Seleccionada:</strong> Enfoque híbrido basado en PMI con elementos ágiles</p>
                <p><strong>Justificación:</strong> PMI proporciona estructura sólida para gestión de proyectos, mientras que elementos ágiles permiten adaptabilidad durante el desarrollo.</p>
            </div>
        </div>

        <!-- 4. Cronograma del Proyecto -->
        <div class="section">
            <h2>4. Cronograma del Proyecto</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Tarea Principal</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Fin</th>
                        <th>Duración</th>
                        <th>Responsable</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Análisis de Requerimientos</td>
                        <td>01/01/2024</td>
                        <td>15/01/2024</td>
                        <td>2 semanas</td>
                        <td>Analista de Sistemas</td>
                    </tr>
                    <tr>
                        <td>Diseño de Arquitectura</td>
                        <td>16/01/2024</td>
                        <td>31/01/2024</td>
                        <td>2 semanas</td>
                        <td>Arquitecto de Software</td>
                    </tr>
                    <tr>
                        <td>Configuración de Base de Datos</td>
                        <td>01/02/2024</td>
                        <td>14/02/2024</td>
                        <td>2 semanas</td>
                        <td>DBA</td>
                    </tr>
                    <tr>
                        <td>Desarrollo Frontend</td>
                        <td>15/02/2024</td>
                        <td>31/03/2024</td>
                        <td>6 semanas</td>
                        <td>Desarrollador Frontend</td>
                    </tr>
                    <tr>
                        <td>Desarrollo Backend</td>
                        <td>15/02/2024</td>
                        <td>31/03/2024</td>
                        <td>6 semanas</td>
                        <td>Desarrollador Backend</td>
                    </tr>
                    <tr>
                        <td>Pruebas e Integración</td>
                        <td>01/04/2024</td>
                        <td>15/04/2024</td>
                        <td>2 semanas</td>
                        <td>QA Tester</td>
                    </tr>
                    <tr>
                        <td>Despliegue y Documentación</td>
                        <td>16/04/2024</td>
                        <td>30/04/2024</td>
                        <td>2 semanas</td>
                        <td>DevOps</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 5. Plan de Recursos -->
        <div class="section">
            <h2>5. Plan de Recursos del Proyecto</h2>
            
            <div class="grid">
                <div class="card">
                    <h4>💻 Recursos Materiales</h4>
                    <ul>
                        <li>Computadoras de desarrollo (4 unidades)</li>
                        <li>Servidor de desarrollo</li>
                        <li>Licencias de software (IDE, herramientas)</li>
                        <li>Acceso a internet de alta velocidad</li>
                        <li>Dispositivos móviles para pruebas</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>👥 Recursos Humanos</h4>
                    <ul>
                        <li><strong>Gerente de Proyecto:</strong> Coordinación general</li>
                        <li><strong>Analista de Sistemas:</strong> Análisis de requerimientos</li>
                        <li><strong>Arquitecto de Software:</strong> Diseño de arquitectura</li>
                        <li><strong>Desarrollador Frontend:</strong> React Native/Expo</li>
                        <li><strong>Desarrollador Backend:</strong> Supabase/APIs</li>
                        <li><strong>DBA:</strong> Gestión de base de datos</li>
                        <li><strong>QA Tester:</strong> Pruebas y calidad</li>
                        <li><strong>DevOps:</strong> Despliegue y mantenimiento</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>💰 Recursos Financieros</h4>
                    <ul>
                        <li><strong>Personal:</strong> $45,000 USD</li>
                        <li><strong>Infraestructura:</strong> $8,000 USD</li>
                        <li><strong>Software y Licencias:</strong> $3,000 USD</li>
                        <li><strong>Capacitación:</strong> $2,000 USD</li>
                        <li><strong>Contingencia:</strong> $5,000 USD</li>
                        <li><strong>Total Estimado:</strong> $63,000 USD</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 6. Presupuesto y Control de Costos -->
        <div class="section">
            <h2>6. Presupuesto Estimado y Control de Costos</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Categoría de Gasto</th>
                        <th>Costo Estimado (USD)</th>
                        <th>Porcentaje</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Personal (Salarios)</td>
                        <td>$45,000</td>
                        <td>71.4%</td>
                    </tr>
                    <tr>
                        <td>Infraestructura (Servidores, Hardware)</td>
                        <td>$8,000</td>
                        <td>12.7%</td>
                    </tr>
                    <tr>
                        <td>Software y Licencias</td>
                        <td>$3,000</td>
                        <td>4.8%</td>
                    </tr>
                    <tr>
                        <td>Capacitación del Equipo</td>
                        <td>$2,000</td>
                        <td>3.2%</td>
                    </tr>
                    <tr>
                        <td>Contingencia</td>
                        <td>$5,000</td>
                        <td>7.9%</td>
                    </tr>
                    <tr style="background: #667eea; color: white; font-weight: bold;">
                        <td><strong>TOTAL</strong></td>
                        <td><strong>$63,000</strong></td>
                        <td><strong>100%</strong></td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight">
                <h3>📊 Control de Gastos</h3>
                <p><strong>Revisiones Semanales:</strong> Análisis de gastos vs presupuesto</p>
                <p><strong>Alertas Automáticas:</strong> Cuando se alcance el 80% del presupuesto por categoría</p>
                <p><strong>Reportes Mensuales:</strong> Análisis de variaciones y ajustes necesarios</p>
            </div>
        </div>

        <!-- 7. Organigrama del Equipo -->
        <div class="section">
            <h2>7. Organigrama del Equipo del Proyecto</h2>
            <div class="canvas-container">
                <canvas id="orgChart" width="800" height="500"></canvas>
            </div>
            
            <div class="grid">
                <div class="card">
                    <h4>👨‍💼 Gerente de Proyecto</h4>
                    <p>Responsable de la coordinación general, seguimiento de cronogramas, gestión de riesgos y comunicación con stakeholders.</p>
                </div>
                
                <div class="card">
                    <h4>📋 Encargado de Documentación</h4>
                    <p>Gestiona toda la documentación técnica, manuales de usuario y procedimientos del sistema.</p>
                </div>
                
                <div class="card">
                    <h4>⚙️ Encargado Técnico</h4>
                    <p>Supervisa la arquitectura técnica, decisiones de implementación y calidad del código.</p>
                </div>
                
                <div class="card">
                    <h4>🔧 Equipo de Desarrollo</h4>
                    <p>Desarrolladores frontend y backend, DBA, QA y DevOps trabajando en paralelo.</p>
                </div>
            </div>
        </div>

        <!-- 8. Plan de Comunicación -->
        <div class="section">
            <h2>8. Plan de Comunicación</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Qué se Comunica</th>
                        <th>A Quién</th>
                        <th>Medio</th>
                        <th>Frecuencia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Avance del proyecto</td>
                        <td>Stakeholders</td>
                        <td>Reunión virtual</td>
                        <td>Semanal</td>
                    </tr>
                    <tr>
                        <td>Problemas técnicos</td>
                        <td>Equipo de desarrollo</td>
                        <td>Slack/Discord</td>
                        <td>Inmediata</td>
                    </tr>
                    <tr>
                        <td>Entregables completados</td>
                        <td>Gerente de proyecto</td>
                        <td>Email + Jira</td>
                        <td>Diaria</td>
                    </tr>
                    <tr>
                        <td>Cambios en requerimientos</td>
                        <td>Todo el equipo</td>
                        <td>Reunión + Documento</td>
                        <td>Según necesidad</td>
                    </tr>
                    <tr>
                        <td>Reportes de calidad</td>
                        <td>QA + Gerente</td>
                        <td>Dashboard</td>
                        <td>Semanal</td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight">
                <h3>📋 Reglas Básicas de Comunicación</h3>
                <ul>
                    <li>Respuesta inmediata a problemas críticos (máximo 2 horas)</li>
                    <li>Actualizaciones diarias de progreso en plataforma centralizada</li>
                    <li>Reuniones semanales obligatorias con agenda predefinida</li>
                    <li>Documentación de todas las decisiones técnicas importantes</li>
                </ul>
            </div>
        </div>

        <!-- 9. Bitácora de Seguimiento -->
        <div class="section">
            <h2>9. Bitácora de Seguimiento del Proyecto</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Actividad Realizada</th>
                        <th>Responsable</th>
                        <th>Avance (%)</th>
                        <th>Observaciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>01/01/2024</td>
                        <td>Inicio del proyecto - Kickoff</td>
                        <td>Gerente de Proyecto</td>
                        <td>5%</td>
                        <td>Proyecto iniciado exitosamente</td>
                    </tr>
                    <tr>
                        <td>15/01/2024</td>
                        <td>Análisis de requerimientos completado</td>
                        <td>Analista de Sistemas</td>
                        <td>20%</td>
                        <td>Documento de requerimientos aprobado</td>
                    </tr>
                    <tr>
                        <td>31/01/2024</td>
                        <td>Diseño de arquitectura finalizado</td>
                        <td>Arquitecto de Software</td>
                        <td>35%</td>
                        <td>Arquitectura React Native + Supabase definida</td>
                    </tr>
                    <tr>
                        <td>14/02/2024</td>
                        <td>Configuración de base de datos</td>
                        <td>DBA</td>
                        <td>45%</td>
                        <td>Tablas principales creadas en Supabase</td>
                    </tr>
                    <tr>
                        <td>31/03/2024</td>
                        <td>Desarrollo de módulos principales</td>
                        <td>Equipo de Desarrollo</td>
                        <td>80%</td>
                        <td>Funcionalidades core implementadas</td>
                    </tr>
                    <tr>
                        <td>15/04/2024</td>
                        <td>Pruebas e integración</td>
                        <td>QA Tester</td>
                        <td>90%</td>
                        <td>Bugs críticos corregidos</td>
                    </tr>
                    <tr>
                        <td>30/04/2024</td>
                        <td>Despliegue y documentación</td>
                        <td>DevOps</td>
                        <td>100%</td>
                        <td>Proyecto completado exitosamente</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 10. Plan de Calidad -->
        <div class="section">
            <h2>10. Plan de Calidad del Proyecto</h2>
            
            <div class="grid">
                <div class="card">
                    <h4>🎯 Definición de Calidad</h4>
                    <p>Sistema que cumple con todos los requerimientos funcionales y no funcionales, con rendimiento óptimo, seguridad robusta y experiencia de usuario excepcional.</p>
                </div>
                
                <div class="card">
                    <h4>✅ Actividades de Aseguramiento</h4>
                    <ul>
                        <li>Revisión de código (Code Review)</li>
                        <li>Pruebas unitarias automatizadas</li>
                        <li>Pruebas de integración</li>
                        <li>Pruebas de usabilidad</li>
                        <li>Auditorías de seguridad</li>
                        <li>Pruebas de rendimiento</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>📊 Indicadores de Calidad</h4>
                    <ul>
                        <li>Cobertura de pruebas > 80%</li>
                        <li>Tiempo de respuesta < 2 segundos</li>
                        <li>Disponibilidad > 99.5%</li>
                        <li>Bugs críticos = 0</li>
                        <li>Satisfacción del usuario > 4.5/5</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 11. Reporte de Control de Calidad -->
        <div class="section">
            <h2>11. Reporte de Control de Calidad</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Tarea Revisada</th>
                        <th>Responsable de Revisión</th>
                        <th>Resultado</th>
                        <th>Fecha de Revisión</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Análisis de requerimientos</td>
                        <td>Gerente de Proyecto</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>15/01/2024</td>
                    </tr>
                    <tr>
                        <td>Diseño de arquitectura</td>
                        <td>Arquitecto Senior</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>31/01/2024</td>
                    </tr>
                    <tr>
                        <td>Configuración de BD</td>
                        <td>DBA Senior</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>14/02/2024</td>
                    </tr>
                    <tr>
                        <td>Desarrollo Frontend</td>
                        <td>Tech Lead</td>
                        <td style="color: orange;">⚠️ Requiere corrección</td>
                        <td>31/03/2024</td>
                    </tr>
                    <tr>
                        <td>Desarrollo Backend</td>
                        <td>Tech Lead</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>31/03/2024</td>
                    </tr>
                    <tr>
                        <td>Pruebas de integración</td>
                        <td>QA Lead</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>15/04/2024</td>
                    </tr>
                    <tr>
                        <td>Despliegue final</td>
                        <td>DevOps Lead</td>
                        <td style="color: green;">✅ Aprobada</td>
                        <td>30/04/2024</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 12. Informe Final -->
        <div class="section">
            <h2>12. Informe Final del Proyecto</h2>
            
            <div class="highlight">
                <h3>📋 Resumen del Proyecto</h3>
                <p><strong>Objetivo:</strong> Desarrollar un CRM integral para la Universidad Milenium que permita la gestión eficiente de estudiantes, carreras, documentos y procesos académicos.</p>
                <p><strong>Solución:</strong> Aplicación web/móvil desarrollada con React Native, Expo y Supabase, con módulos especializados para cada área de la universidad.</p>
                <p><strong>Metodología:</strong> Enfoque híbrido basado en PMI con elementos ágiles para mayor flexibilidad.</p>
            </div>

            <div class="grid">
                <div class="card">
                    <h4>📚 Lecciones Aprendidas</h4>
                    <ul>
                        <li>La integración temprana de Supabase aceleró el desarrollo</li>
                        <li>El enfoque móvil-first mejoró la experiencia del usuario</li>
                        <li>La documentación continua evitó retrasos</li>
                        <li>Las pruebas automatizadas redujeron bugs en producción</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>🎯 Resultados Obtenidos</h4>
                    <ul>
                        <li>Sistema completamente funcional</li>
                        <li>100% de requerimientos cumplidos</li>
                        <li>Rendimiento óptimo (< 2s respuesta)</li>
                        <li>Interfaz moderna y responsive</li>
                        <li>Documentación completa</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>🚀 Recomendaciones Futuras</h4>
                    <ul>
                        <li>Implementar análisis de datos avanzado</li>
                        <li>Agregar funcionalidades de IA/ML</li>
                        <li>Expandir a otras universidades</li>
                        <li>Desarrollar API pública</li>
                        <li>Implementar sistema de notificaciones push</li>
                    </ul>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Requerimientos Cumplidos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">4</div>
                    <div class="stat-label">Meses de Desarrollo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Miembros del Equipo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$63K</div>
                    <div class="stat-label">Presupuesto Total</div>
                </div>
            </div>
        </div>

                 <!-- Información Técnica del Sistema -->
         <div class="section">
             <h2>📊 Información Técnica del Sistema CRM-UM</h2>
             
             <div class="grid">
                 <div class="card">
                     <h4>🏗️ Arquitectura del Sistema</h4>
                     <ul>
                         <li><strong>Frontend:</strong> React Native + Expo</li>
                         <li><strong>Backend:</strong> Supabase (PostgreSQL)</li>
                         <li><strong>Autenticación:</strong> Supabase Auth + Google OAuth</li>
                         <li><strong>Almacenamiento:</strong> Supabase Storage</li>
                         <li><strong>Estado:</strong> Zustand</li>
                         <li><strong>Navegación:</strong> Expo Router</li>
                     </ul>
                 </div>
                 
                 <div class="card">
                     <h4>🗄️ Estructura de Base de Datos</h4>
                     <ul>
                         <li><strong>Tabla alumnos:</strong> Gestión de estudiantes</li>
                         <li><strong>Tabla carreras:</strong> Programas académicos</li>
                         <li><strong>Tabla ciclos:</strong> Períodos académicos</li>
                         <li><strong>Tabla documentos_alumno:</strong> Archivos de estudiantes</li>
                         <li><strong>Tabla pagos:</strong> Control de pagos</li>
                         <li><strong>Tabla usuariosum:</strong> Personal administrativo</li>
                         <li><strong>Tabla areas:</strong> Departamentos universitarios</li>
                         <li><strong>Tabla permisos:</strong> Control de acceso</li>
                         <li><strong>Tabla peticiones_cambio_carrera:</strong> Solicitudes de cambio</li>
                         <li><strong>Tabla notificaciones:</strong> Sistema de alertas</li>
                     </ul>
                 </div>
                 
                 <div class="card">
                     <h4>📱 Módulos Principales</h4>
                     <ul>
                         <li><strong>Gestión de Alumnos:</strong> Registro, documentos, pagos</li>
                         <li><strong>Administración de Usuarios:</strong> Empleados, roles, permisos</li>
                         <li><strong>Cambio de Carrera:</strong> Solicitudes y aprobaciones</li>
                         <li><strong>Notificaciones:</strong> Sistema de alertas en tiempo real</li>
                         <li><strong>Búsqueda Global:</strong> Búsqueda unificada</li>
                         <li><strong>Dashboard:</strong> Estadísticas y métricas</li>
                     </ul>
                 </div>
                 
                 <div class="card">
                     <h4>🔧 Características Técnicas</h4>
                     <ul>
                         <li><strong>Responsive Design:</strong> Adaptable a móvil y desktop</li>
                         <li><strong>Offline Support:</strong> Funcionalidad sin conexión</li>
                         <li><strong>Push Notifications:</strong> Alertas en tiempo real</li>
                         <li><strong>File Upload:</strong> Subida de documentos</li>
                         <li><strong>Biometric Auth:</strong> Autenticación biométrica</li>
                         <li><strong>Dark Mode:</strong> Soporte para tema oscuro</li>
                     </ul>
                 </div>
             </div>
         </div>

         <!-- Diagrama de Clases del Sistema -->
         <div class="section">
             <h2>🏗️ Diagrama de Clases del Sistema</h2>
             
             <div class="highlight">
                 <h3>📊 Estructura de Base de Datos CRM-UM</h3>
                 <p>El siguiente diagrama representa la estructura completa de la base de datos del sistema CRM-UM, mostrando todas las entidades, sus atributos y las relaciones entre ellas. Este diagrama sigue el estándar UML y utiliza el estilo "luicdchart" para una representación clara y profesional.</p>
             </div>
             
             <div class="canvas-container">
                 <h3>🗂️ Diagrama de Clases - Base de Datos PostgreSQL</h3>
                 <canvas id="classDiagram" width="1400" height="1200" style="max-width: 100%; height: auto;"></canvas>
                 <p><em>Diagrama generado automáticamente desde el esquema SQL de la base de datos</em></p>
             </div>
             
             <div class="grid">
                 <div class="card">
                     <h4>📋 Entidades Principales</h4>
                     <ul>
                         <li><strong>alumnos:</strong> Gestión de estudiantes</li>
                         <li><strong>usuariosum:</strong> Usuarios del sistema</li>
                         <li><strong>areas:</strong> Áreas organizacionales</li>
                         <li><strong>carreras:</strong> Programas académicos</li>
                         <li><strong>ciclos:</strong> Períodos académicos</li>
                     </ul>
                 </div>
                 
                 <div class="card">
                     <h4>🔄 Entidades de Proceso</h4>
                     <ul>
                         <li><strong>peticiones_cambio_carrera:</strong> Solicitudes de cambio</li>
                         <li><strong>firmas_cambio_carrera:</strong> Sistema de firmas</li>
                         <li><strong>notificaciones:</strong> Sistema de notificaciones</li>
                         <li><strong>documentos_alumno:</strong> Gestión documental</li>
                         <li><strong>pagos:</strong> Control de pagos</li>
                     </ul>
                 </div>
                 
                 <div class="card">
                     <h4>🔐 Entidades de Seguridad</h4>
                     <ul>
                         <li><strong>permisos:</strong> Control de acceso</li>
                         <li><strong>politicas_rls:</strong> Políticas de seguridad</li>
                     </ul>
                 </div>
             </div>
             
             <div class="highlight">
                 <h4>🔗 Relaciones Clave del Sistema</h4>
                 <p><strong>Relaciones de Herencia:</strong> El sistema implementa un modelo de usuarios jerárquico donde los usuarios pueden reportar a otros usuarios, creando una estructura organizacional flexible.</p>
                 <p><strong>Relaciones de Composición:</strong> Las áreas contienen permisos y políticas RLS, mientras que los alumnos están asociados a carreras y ciclos específicos.</p>
                 <p><strong>Relaciones de Asociación:</strong> Las peticiones de cambio de carrera involucran múltiples entidades (alumnos, asesores, carreras, ciclos) y requieren firmas de diferentes áreas.</p>
             </div>
         </div>

         <!-- Referencias y Bibliografía -->
         <div class="section">
             <h2>📚 Referencias y Bibliografía</h2>
             
             <div class="references">
                 <h3>🔍 Fuentes de Investigación y Desarrollo</h3>
                 
                 <ol>
                     <li><strong>React Native Documentation</strong> (2024). Meta Platforms, Inc. Disponible en: https://reactnative.dev/docs/getting-started</li>
                     
                     <li><strong>Expo Documentation</strong> (2024). Expo Development Team. Disponible en: https://docs.expo.dev/</li>
                     
                     <li><strong>Supabase Documentation</strong> (2024). Supabase, Inc. Disponible en: https://supabase.com/docs</li>
                     
                     <li><strong>PostgreSQL Documentation</strong> (2024). The PostgreSQL Global Development Group. Disponible en: https://www.postgresql.org/docs/</li>
                     
                     <li><strong>Project Management Institute (PMI)</strong> (2021). A Guide to the Project Management Body of Knowledge (PMBOK® Guide) - Seventh Edition. PMI Publications.</li>
                     
                     <li><strong>Rational Unified Process (RUP)</strong> (2003). IBM Rational Software. "The Rational Unified Process: An Introduction" by Philippe Kruchten.</li>
                     
                     <li><strong>Business Process Management (BPM)</strong> (2020). "Business Process Management: Concepts, Languages, Architectures" by Mathias Weske. Springer-Verlag Berlin Heidelberg.</li>
                     
                     <li><strong>Zustand Documentation</strong> (2024). Zustand Team. Disponible en: https://github.com/pmndrs/zustand</li>
                     
                     <li><strong>Expo Router Documentation</strong> (2024). Expo Development Team. Disponible en: https://docs.expo.dev/router/introduction/</li>
                     
                     <li><strong>Google OAuth 2.0 Documentation</strong> (2024). Google LLC. Disponible en: https://developers.google.com/identity/protocols/oauth2</li>
                     
                     <li><strong>TypeScript Documentation</strong> (2024). Microsoft Corporation. Disponible en: https://www.typescriptlang.org/docs/</li>
                     
                     <li><strong>Row Level Security (RLS) in PostgreSQL</strong> (2024). The PostgreSQL Global Development Group. Disponible en: https://www.postgresql.org/docs/current/ddl-rowsecurity.html</li>
                     
                     <li><strong>React Native Vector Icons</strong> (2024). GitHub Repository. Disponible en: https://github.com/oblador/react-native-vector-icons</li>
                     
                     <li><strong>Expo Haptics Documentation</strong> (2024). Expo Development Team. Disponible en: https://docs.expo.dev/versions/latest/sdk/haptics/</li>
                     
                     <li><strong>React Native Gesture Handler</strong> (2024). Software Mansion. Disponible en: https://docs.swmansion.com/react-native-gesture-handler/</li>
                     
                     <li><strong>Universidad Milenium</strong> (2024). Información institucional y requerimientos del sistema CRM. Documentación interna del proyecto.</li>
                     
                     <li><strong>Neo-Brutalist Design Principles</strong> (2024). "Neo-Brutalism in Web Design" by Design Shack. Disponible en: https://designshack.net/articles/graphics/neo-brutalism/</li>
                     
                     <li><strong>Material Design Guidelines</strong> (2024). Google LLC. Disponible en: https://material.io/design</li>
                     
                     <li><strong>Accessibility Guidelines (WCAG 2.1)</strong> (2018). World Wide Web Consortium (W3C). Disponible en: https://www.w3.org/WAI/WCAG21/quickref/</li>
                     
                     <li><strong>Mobile App Development Best Practices</strong> (2024). Apple Developer Documentation. Disponible en: https://developer.apple.com/design/human-interface-guidelines/</li>
                 </ol>
                 
                 <div class="highlight">
                     <h4>📖 Notas de Investigación</h4>
                     <p>Esta documentación se basa en investigación exhaustiva de las mejores prácticas en desarrollo de aplicaciones móviles, gestión de proyectos y sistemas de información universitaria. Todas las referencias han sido verificadas y utilizadas como base para el desarrollo del sistema CRM-UM.</p>
                 </div>
             </div>
         </div>
     </div>

    <script>
        // Canvas para Mapa Conceptual
        function drawConceptMap() {
            const canvas = document.getElementById('conceptMap');
            const ctx = canvas.getContext('2d');
            
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Configuración
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            
            // Dibujar nodo central
            ctx.fillStyle = '#1a1a1a';
            ctx.beginPath();
            ctx.arc(400, 200, 60, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = 'white';
            ctx.fillText('Administración', 400, 195);
            ctx.fillText('de Proyectos', 400, 215);
            
            // Dibujar nodos conectados
            const nodes = [
                {x: 200, y: 100, text: 'Planificación', color: '#000000'},
                {x: 600, y: 100, text: 'Ejecución', color: '#000000'},
                {x: 200, y: 300, text: 'Control', color: '#000000'},
                {x: 600, y: 300, text: 'Cierre', color: '#000000'},
                {x: 100, y: 200, text: 'Inicio', color: '#000000'},
                {x: 700, y: 200, text: 'Monitoreo', color: '#000000'}
            ];
            
            // Dibujar conexiones
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 2;
            nodes.forEach(node => {
                ctx.beginPath();
                ctx.moveTo(400, 200);
                ctx.lineTo(node.x, node.y);
                ctx.stroke();
            });
            
            // Dibujar nodos
            nodes.forEach(node => {
                ctx.fillStyle = node.color;
                ctx.beginPath();
                ctx.arc(node.x, node.y, 40, 0, 2 * Math.PI);
                ctx.fill();
                
                ctx.fillStyle = 'white';
                ctx.fillText(node.text, node.x, node.y + 5);
            });
        }

        // Canvas para Organigrama
        function drawOrgChart() {
            const canvas = document.getElementById('orgChart');
            const ctx = canvas.getContext('2d');
            
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Configuración
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            // Dibujar gerente de proyecto
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(350, 50, 100, 60);
            ctx.fillStyle = 'white';
            ctx.fillText('Gerente de', 400, 75);
            ctx.fillText('Proyecto', 400, 95);
            
            // Líneas de conexión
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 2;
            
            // Conectar a analista
            ctx.beginPath();
            ctx.moveTo(400, 110);
            ctx.lineTo(200, 150);
            ctx.stroke();
            
            // Conectar a arquitecto
            ctx.beginPath();
            ctx.moveTo(400, 110);
            ctx.lineTo(400, 150);
            ctx.stroke();
            
            // Conectar a tech lead
            ctx.beginPath();
            ctx.moveTo(400, 110);
            ctx.lineTo(600, 150);
            ctx.stroke();
            
            // Dibujar roles de nivel 2
            const roles2 = [
                {x: 200, y: 150, text: 'Analista de\nSistemas'},
                {x: 400, y: 150, text: 'Arquitecto\nde Software'},
                {x: 600, y: 150, text: 'Tech Lead'}
            ];
            
            roles2.forEach(role => {
                ctx.fillStyle = '#000000';
                ctx.fillRect(role.x - 50, role.y, 100, 50);
                ctx.fillStyle = 'white';
                ctx.fillText(role.text.split('\n')[0], role.x, role.y + 20);
                ctx.fillText(role.text.split('\n')[1], role.x, role.y + 40);
            });
            
            // Conectar a desarrolladores
            ctx.beginPath();
            ctx.moveTo(200, 200);
            ctx.lineTo(150, 250);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(200, 200);
            ctx.lineTo(250, 250);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(400, 200);
            ctx.lineTo(350, 250);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(400, 200);
            ctx.lineTo(450, 250);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(600, 200);
            ctx.lineTo(550, 250);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(600, 200);
            ctx.lineTo(650, 250);
            ctx.stroke();
            
            // Dibujar roles de nivel 3
            const roles3 = [
                {x: 150, y: 250, text: 'Analista\nDocumentación'},
                {x: 250, y: 250, text: 'Analista\nRequerimientos'},
                {x: 350, y: 250, text: 'DBA'},
                {x: 450, y: 250, text: 'QA Tester'},
                {x: 550, y: 250, text: 'Dev Frontend'},
                {x: 650, y: 250, text: 'Dev Backend'}
            ];
            
            roles3.forEach(role => {
                ctx.fillStyle = '#666666';
                ctx.fillRect(role.x - 40, role.y, 80, 40);
                ctx.fillStyle = 'white';
                ctx.fillText(role.text.split('\n')[0], role.x, role.y + 15);
                ctx.fillText(role.text.split('\n')[1], role.x, role.y + 30);
            });
        }

        // Canvas para Diagrama de Clases
        function drawClassDiagram() {
            const canvas = document.getElementById('classDiagram');
            const ctx = canvas.getContext('2d');
            
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Configuración
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            ctx.lineWidth = 2;
            
            // Función simple para obtener punto de conexión en el perímetro
            function getConnectionPoint(rectX, rectY, rectWidth, rectHeight, targetX, targetY) {
                const centerX = rectX + rectWidth / 2;
                const centerY = rectY + rectHeight / 2;
                
                // Calcular ángulo desde el centro hacia el objetivo
                const angle = Math.atan2(targetY - centerY, targetX - centerX);
                
                let x, y;
                
                // Determinar punto de conexión en el perímetro
                if (Math.abs(Math.cos(angle)) > Math.abs(Math.sin(angle))) {
                    // Conectar en lado izquierdo o derecho
                    if (Math.cos(angle) > 0) {
                        x = rectX + rectWidth;
                        y = centerY + (rectWidth / 2) * Math.tan(angle);
                    } else {
                        x = rectX;
                        y = centerY - (rectWidth / 2) * Math.tan(angle);
                    }
                } else {
                    // Conectar en lado superior o inferior
                    if (Math.sin(angle) > 0) {
                        y = rectY + rectHeight;
                        x = centerX + (rectHeight / 2) / Math.tan(angle);
                    } else {
                        y = rectY;
                        x = centerX - (rectHeight / 2) / Math.tan(angle);
                    }
                }
                
                // Asegurar que el punto esté dentro del rectángulo
                x = Math.max(rectX, Math.min(rectX + rectWidth, x));
                y = Math.max(rectY, Math.min(rectY + rectHeight, y));
                
                return { x: x, y: y };
            }
            
            // Definir clases/tablas con mejor organización y más espacio
            const classes = [
                // Primera fila - Entidades principales
                {
                    name: 'alumnos',
                    x: 50, y: 80, width: 180, height: 100,
                    attributes: [
                        'id (PK)',
                        'nombre',
                        'apellidos', 
                        'email',
                        'telefono',
                        'carrera_id (FK)',
                        'ciclo_id (FK)',
                        'status',
                        'fecha_alta',
                        'asesor_id (FK)',
                        'matricula'
                    ]
                },
                {
                    name: 'usuariosum',
                    x: 300, y: 80, width: 180, height: 120,
                    attributes: [
                        'idusuario (PK)',
                        'nombreusuario',
                        'apellido',
                        'correoinstitucional',
                        'password',
                        'matricula',
                        'telefono',
                        'idarea (FK)',
                        'reporta_a (FK)',
                        'pin',
                        'estado',
                        'auth_uid'
                    ]
                },
                {
                    name: 'areas',
                    x: 550, y: 80, width: 160, height: 90,
                    attributes: [
                        'idarea (PK)',
                        'nombrearea',
                        'rolarea',
                        'permisos (JSON)',
                        'participa_firma_cambio_carrera',
                        'orden_firma'
                    ]
                },
                // Segunda fila - Entidades académicas
                {
                    name: 'carreras',
                    x: 50, y: 250, width: 140, height: 70,
                    attributes: [
                        'id (PK)',
                        'nombre',
                        'duracion_anios'
                    ]
                },
                {
                    name: 'ciclos',
                    x: 250, y: 250, width: 140, height: 70,
                    attributes: [
                        'id (PK)',
                        'nombre',
                        'fecha_inicio',
                        'fecha_fin',
                        'carrera_id (FK)'
                    ]
                },
                {
                    name: 'peticiones_cambio_carrera',
                    x: 450, y: 250, width: 180, height: 110,
                    attributes: [
                        'id (PK)',
                        'alumno_id (FK)',
                        'asesor_id (FK)',
                        'carrera_actual_id (FK)',
                        'carrera_nueva_id (FK)',
                        'ciclo_actual_id (FK)',
                        'ciclo_nuevo_id (FK)',
                        'grupo_actual',
                        'grupo_nuevo',
                        'motivo',
                        'estado',
                        'fecha_solicitud',
                        'fecha_resolucion',
                        'jefe_aprobador_id (FK)',
                        'contraseña_aprobador',
                        'comentarios'
                    ]
                },
                {
                    name: 'firmas_cambio_carrera',
                    x: 700, y: 250, width: 160, height: 90,
                    attributes: [
                        'id (PK)',
                        'peticion_id (FK)',
                        'area_id (FK)',
                        'usuario_firmante_id (FK)',
                        'estado',
                        'fecha_firma',
                        'contraseña_usada',
                        'comentarios'
                    ]
                },
                // Tercera fila - Entidades de soporte
                {
                    name: 'notificaciones',
                    x: 50, y: 420, width: 160, height: 90,
                    attributes: [
                        'id (PK)',
                        'usuario_id (FK)',
                        'tipo',
                        'titulo',
                        'mensaje',
                        'leida',
                        'fecha_creacion',
                        'datos_adicionales (JSONB)'
                    ]
                },
                {
                    name: 'documentos_alumno',
                    x: 250, y: 420, width: 160, height: 70,
                    attributes: [
                        'id (PK)',
                        'alumno_id (FK)',
                        'tipo_documento',
                        'url_archivo',
                        'fecha_subida'
                    ]
                },
                {
                    name: 'pagos',
                    x: 450, y: 420, width: 140, height: 70,
                    attributes: [
                        'id (PK)',
                        'alumno_id (FK)',
                        'modo_pago',
                        'status',
                        'fecha_pago',
                        'pin_cajero'
                    ]
                },
                {
                    name: 'permisos',
                    x: 650, y: 420, width: 140, height: 70,
                    attributes: [
                        'id (PK)',
                        'nombre',
                        'descripcion',
                        'tipo',
                        'area_id (FK)',
                        'activo'
                    ]
                },
                {
                    name: 'politicas_rls',
                    x: 850, y: 420, width: 140, height: 70,
                    attributes: [
                        'id (PK)',
                        'nombre',
                        'tabla',
                        'politica',
                        'area_id (FK)',
                        'activo'
                    ]
                }
            ];
            
            // Dibujar clases primero
            classes.forEach(cls => {
                // Dibujar rectángulo de la clase
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 3;
                ctx.strokeRect(cls.x, cls.y, cls.width, cls.height);
                
                // Dibujar header de la clase
                ctx.fillStyle = '#1a1a1a';
                ctx.fillRect(cls.x, cls.y, cls.width, 25);
                
                // Nombre de la clase
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(cls.name, cls.x + cls.width/2, cls.y + 15);
                
                // Atributos
                ctx.fillStyle = '#000000';
                ctx.font = '9px Arial';
                ctx.textAlign = 'left';
                
                let yOffset = cls.y + 35;
                cls.attributes.forEach((attr, index) => {
                    if (yOffset < cls.y + cls.height - 10) {
                        ctx.fillText(attr, cls.x + 5, yOffset);
                        yOffset += 12;
                    }
                });
                
                ctx.textAlign = 'center';
            });
            
            // Definir relaciones con nombres de clases
            const relationships = [
                { from: 'alumnos', to: 'carreras', label: '1:N' },
                { from: 'alumnos', to: 'ciclos', label: '1:N' },
                { from: 'alumnos', to: 'usuariosum', label: '1:N' },
                { from: 'usuariosum', to: 'areas', label: 'N:1' },
                { from: 'usuariosum', to: 'usuariosum', label: '1:N' },
                { from: 'ciclos', to: 'carreras', label: 'N:1' },
                { from: 'peticiones_cambio_carrera', to: 'alumnos', label: '1:1' },
                { from: 'peticiones_cambio_carrera', to: 'usuariosum', label: '1:1' },
                { from: 'peticiones_cambio_carrera', to: 'carreras', label: '1:1' },
                { from: 'peticiones_cambio_carrera', to: 'ciclos', label: '1:1' },
                { from: 'firmas_cambio_carrera', to: 'peticiones_cambio_carrera', label: '1:N' },
                { from: 'firmas_cambio_carrera', to: 'areas', label: '1:1' },
                { from: 'firmas_cambio_carrera', to: 'usuariosum', label: '1:1' },
                { from: 'notificaciones', to: 'usuariosum', label: '1:N' },
                { from: 'documentos_alumno', to: 'alumnos', label: '1:N' },
                { from: 'pagos', to: 'alumnos', label: '1:N' },
                { from: 'permisos', to: 'areas', label: '1:N' },
                { from: 'politicas_rls', to: 'areas', label: '1:N' }
            ];
            
            // Dibujar relaciones con flechas mejoradas
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 2;
            
            relationships.forEach(rel => {
                const fromClass = classes.find(c => c.name === rel.from);
                const toClass = classes.find(c => c.name === rel.to);
                
                if (!fromClass || !toClass) return;
                
                // Calcular puntos de conexión en los perímetros
                const fromCenter = {
                    x: fromClass.x + fromClass.width / 2,
                    y: fromClass.y + fromClass.height / 2
                };
                const toCenter = {
                    x: toClass.x + toClass.width / 2,
                    y: toClass.y + toClass.height / 2
                };
                
                const fromPoint = getConnectionPoint(
                    fromClass.x, fromClass.y, fromClass.width, fromClass.height,
                    toCenter.x, toCenter.y
                );
                const toPoint = getConnectionPoint(
                    toClass.x, toClass.y, toClass.width, toClass.height,
                    fromCenter.x, fromCenter.y
                );
                
                // Dibujar línea
                ctx.beginPath();
                ctx.moveTo(fromPoint.x, fromPoint.y);
                ctx.lineTo(toPoint.x, toPoint.y);
                ctx.stroke();
                
                // Dibujar flecha
                const angle = Math.atan2(toPoint.y - fromPoint.y, toPoint.x - fromPoint.x);
                const arrowLength = 12;
                const arrowAngle = Math.PI / 6;
                
                ctx.beginPath();
                ctx.moveTo(toPoint.x, toPoint.y);
                ctx.lineTo(toPoint.x - arrowLength * Math.cos(angle - arrowAngle), 
                          toPoint.y - arrowLength * Math.sin(angle - arrowAngle));
                ctx.moveTo(toPoint.x, toPoint.y);
                ctx.lineTo(toPoint.x - arrowLength * Math.cos(angle + arrowAngle), 
                          toPoint.y - arrowLength * Math.sin(angle + arrowAngle));
                ctx.stroke();
                
                // Etiqueta de relación
                const midX = (fromPoint.x + toPoint.x) / 2;
                const midY = (fromPoint.y + toPoint.y) / 2;
                
                // Fondo para la etiqueta
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(midX - 20, midY - 10, 40, 20);
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 1;
                ctx.strokeRect(midX - 20, midY - 10, 40, 20);
                
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 9px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(rel.label, midX, midY + 3);
            });
            
            // Leyenda
            ctx.fillStyle = '#1a1a1a';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('Leyenda:', 50, 580);
            
            ctx.font = '10px Arial';
            ctx.fillText('PK = Primary Key', 50, 600);
            ctx.fillText('FK = Foreign Key', 50, 615);
            ctx.fillText('1:N = Uno a Muchos', 50, 630);
            ctx.fillText('1:1 = Uno a Uno', 50, 645);
            ctx.fillText('N:1 = Muchos a Uno', 50, 660);
            
            // Título del diagrama
            ctx.fillStyle = '#1a1a1a';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Diagrama de Clases - Sistema CRM-UM', 700, 30);
            ctx.font = '12px Arial';
            ctx.fillText('Base de Datos PostgreSQL con Row Level Security (RLS)', 700, 50);
            
            ctx.textAlign = 'center';
        }

        // Inicializar canvas cuando se carga la página
        window.addEventListener('load', function() {
            drawConceptMap();
            drawOrgChart();
            drawClassDiagram();
        });

        // Inicialización completa cuando se carga la página
        document.addEventListener('DOMContentLoaded', function() {
            // Los canvas se inicializan automáticamente con window.addEventListener('load')
        });
    </script>
</body>
</html> 